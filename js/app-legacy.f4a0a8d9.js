(function(){"use strict";var e={8774:function(e,t,a){a(6992),a(8674),a(9601),a(7727);var r=a(9963),n=a(6252),i=a(8296),o=a.n(i),s={id:"app"};function c(e,t){var a=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(a)])}var u=a(3744);const l={},d=(0,u.Z)(l,[["render",c]]);var g=d,f=(a(9600),a(1249),a(2222),a(7941),a(2119)),p=a(3577);function h(e,t,a,r,i,o){var s=(0,n.up)("DmsSidebar"),c=(0,n.up)("MainPageWrapper");return(0,n.wg)(),(0,n.iD)("div",{id:"wrapper",class:(0,p.C_)({sidebarToggled:i.sidebarExpanded})},[(0,n.Wm)(s,{onToggleSidebar:o.toggleSidebar,onRunSearch:o.updateQuery,onToggleFacet:o.toggleFacet,aggregations:i.aggregations},null,8,["onToggleSidebar","onRunSearch","onToggleFacet","aggregations"]),(0,n.Wm)(c,{hits:i.hits,"search-in-progress":i.searchInProgress,"load-more":o.loadMore,"reset-toggle":i.resetToggle},null,8,["hits","search-in-progress","load-more","reset-toggle"])],2)}var y=a(5957),m=(a(1539),a(4916),a(4765),a(4747),a(561),a(3123),{id:"sidebar-wrapper"}),v={class:"container-fluid"},b={class:"row"},_={class:"col-sm-2"},k=(0,n._)("i",{class:"fa fa-bars","aria-hidden":"true"},null,-1),w=[k],F={class:"col-sm-10"},q={class:"form-group mb-4"},j={class:"input-group"},D=(0,n._)("div",{class:"input-group-text",id:"basic-addon1"},[(0,n._)("i",{class:"fa fa-search","aria-hidden":"true"})],-1),M=(0,n._)("div",{id:"searchSummary"},null,-1),S={id:"searchFacets"};function T(e,t,a,i,o,s){var c=(0,n.up)("Facet");return(0,n.wg)(),(0,n.iD)("div",m,[(0,n._)("div",v,[(0,n._)("div",b,[(0,n._)("div",_,[(0,n._)("a",{id:"menu-toggle",onClick:t[0]||(t[0]=function(){return s.toggleSidebar&&s.toggleSidebar.apply(s,arguments)})},w)]),(0,n._)("div",F,[(0,n._)("div",q,[(0,n._)("div",j,[D,(0,n.wy)((0,n._)("input",{type:"search",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.mutableQuery=e}),onInput:t[2]||(t[2]=function(){return s.runSearch&&s.runSearch.apply(s,arguments)}),placeholder:"Search"},null,544),[[r.nr,o.mutableQuery]])])]),M,(0,n._)("div",S,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.sortedAggregations,(function(e){return(0,n.wg)(),(0,n.j4)(c,{aggregation:e,key:e.id,onToggleFacet:s.toggleFacet},null,8,["aggregation","onToggleFacet"])})),128))])])])])])}a(9826);var O=a(3279),x=a.n(O),C=(a(7327),a(5374)),I=a.n(C),K={ELASTIC_INDEX:"prod_drupal"},P=new(I().Client)({host:"https://elastic.thingy-ma-jig.co.uk/"}),E={type:{fieldName:"type",title:"Type",labels:{project_module:"Module",project_theme:"Theme"}},compatibility:{fieldName:"compatibility",title:"Compatibility"},project_type:{fieldName:"project_type",title:"Project Type"},category:{fieldName:"category",title:"Categories"},maintenance_status:{fieldName:"maintenance_status",title:"Maintenance Status"},development_status:{fieldName:"development_status",title:"Development Status"},author:{fieldName:"author",title:"Authors"}},z={},N="",L=18;function R(e){var t="*";return void 0!==this.query&&this.query.length>0&&"-"!==this.query&&(t=this.query),P.search({index:K.ELASTIC_INDEX,body:{from:e*L,size:L,query:{bool:{must:{simple_query_string:{query:t,fields:["title^10","project_machine_name^4","body"]}},filter:Object.keys(z).map((function(e){var t=z[e];if(null!==t&&void 0!==t&&t.length>0){var a={terms:{}};return a.terms[E[e].fieldName]=t,a}return null})).filter((function(e){return!!e}))}},highlight:{fields:{body:{}}},aggregations:Object.keys(E).reduce((function(e,t){return e[t]={terms:{field:E[t].fieldName}},e}),{})}}).then((function(e){return{hits:e.hits,aggregations:Object.keys(e.aggregations).map((function(t){return{key:t,name:E[t].title,items:e.aggregations[t].buckets.map((function(e){var a=e;return a.refined=!1,z[t]&&(a.refined=-1!==z[t].indexOf(e.key)),a})),isRefined:!!z[t]&&z[t].length}}))}}))}var Z={search:R,facetMap:E,activeFacets:z,query:N,pageLength:L},U=(a(8309),(0,n._)("span",{class:"icon"},null,-1)),A={class:"card-title small"},W=["id"],H=["data-facet-key","data-facet-value"],$={class:"value"},Q={class:"count"};function Y(e,t,a,r,i,o){return(0,n.wg)(),(0,n.iD)("div",{class:(0,p.C_)(["card card-default facet",{collapsed:e.collapsed}])},[(0,n._)("div",{class:"card-header",onClick:t[0]||(t[0]=function(){return o.toggleCollapse&&o.toggleCollapse.apply(o,arguments)})},[U,(0,n._)("span",A,(0,p.zw)(a.aggregation.name),1)]),(0,n._)("ul",{id:"collapse_"+a.aggregation.key,class:"list-group list-group-flush"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.aggregation.items,(function(e){return(0,n.wg)(),(0,n.iD)("li",{key:e.key,class:(0,p.C_)(["list-group-item d-flex justify-content-between align-items-center",{refined:e.refined}]),"data-facet-key":a.aggregation.key,"data-facet-value":e.key,onClick:t[1]||(t[1]=function(){return o.refine&&o.refine.apply(o,arguments)})},[(0,n._)("div",$,(0,p.zw)(o.formatFacetKey(e.key,a.aggregation.key)),1),(0,n._)("span",Q,(0,p.zw)(e.doc_count),1)],10,H)})),128))],8,W)],2)}var B={props:{aggregation:{type:Object,required:!0}},data:function(){return{collapsed:!this.aggregation.isRefined}},computed:{formatFacetKey:function(){return function(e,t){return Z.facetMap[t].labels&&Z.facetMap[t].labels[e]?Z.facetMap[t].labels[e]:e}}},methods:{refine:function(e){this.$emit("toggleFacet",e.currentTarget.dataset.facetKey,e.currentTarget.dataset.facetValue)},toggleCollapse:function(){this.collapsed=!this.collapsed}}};const V=(0,u.Z)(B,[["render",Y]]);var X=V,G={props:{aggregations:{type:Array,default:function(){return[]}}},components:{Facet:X},data:function(){return{mutableQuery:Z.query}},methods:{toggleSidebar:function(){this.$emit("toggleSidebar")},toggleFacet:function(e,t){this.$emit("toggleFacet",e,t)}},computed:{sortedAggregations:function(){var e=this;return this.aggregations?Object.keys(Z.facetMap).reduce((function(t,a){var r=e.aggregations.find((function(e){return e.key===a}));return r&&t.push(r),t}),[]):[]},runSearch:function(){return x()((function(e){this.$emit("runSearch",e.srcElement.value)}),250).bind(this)}}};const J=(0,u.Z)(G,[["render",T]]);var ee=J,te={id:"page-content-wrapper"},ae={class:"container-fluid"},re=(0,n._)("div",{class:"row"},[(0,n._)("div",{class:"col"},[(0,n._)("h3",{class:"text-muted"}," Drupal module search ")])],-1),ne={id:"results",class:"row"},ie={key:0};function oe(e,t,a,r,i,o){var s=(0,n.up)("DmsResult"),c=(0,n.up)("DmsSpinner"),u=(0,n.up)("InfiniteLoading");return(0,n.wg)(),(0,n.iD)("div",te,[(0,n._)("div",ae,[re,(0,n._)("div",ne,[null==a.hits?((0,n.wg)(),(0,n.iD)("p",ie," Lets do a search! ")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.hits,(function(e){return(0,n.wg)(),(0,n.j4)(s,{hit:e,key:e._id},null,8,["hit"])})),128)),a.searchInProgress?((0,n.wg)(),(0,n.j4)(c,{key:1})):(0,n.kq)("",!0),(0,n.Wm)(u,{onInfinite:a.loadMore,distance:240,"first-load":!1,identifier:a.resetToggle},null,8,["onInfinite","identifier"])])])])}var se={class:"resultWrapper"},ce={class:"result p-3 mb-4 bg-white shadow-sm border border-gray"},ue=["href"],le={class:"badge-group mb-2"},de={key:0,class:"badge rounded-pill bg-info"},ge=(0,n._)("i",{class:"fa fa-file-code-o"},null,-1),fe=(0,n._)("i",{class:"fa fa-code-fork"},null,-1),pe={key:1,class:"badge rounded-pill bg-primary"},he=(0,n._)("i",{class:"fa fa-code-fork"},null,-1),ye={key:2,class:"badge rounded-pill bg-secondary"},me=(0,n._)("i",{class:"fa fa-user"},null,-1),ve={key:3,class:"badge rounded-pill bg-secondary"},be=(0,n._)("i",{class:"fa fa-cog"},null,-1),_e={key:4,class:"badge rounded-pill bg-secondary"},ke=(0,n._)("i",{class:"fa fa-code"},null,-1),we=(0,n._)("i",{class:"fa fa-tag"},null,-1),Fe={key:0,class:"small body"};function qe(e,t,a,r,i,o){return(0,n.wg)(),(0,n.iD)("div",se,[(0,n._)("div",ce,[(0,n._)("h3",null,[(0,n._)("a",{href:a.hit._source.url},(0,p.zw)(a.hit._source.title),9,ue)]),(0,n._)("div",le,[a.hit._source.type?((0,n.wg)(),(0,n.iD)("span",de,[ge,(0,n.Uk)(" "+(0,p.zw)(o.formatFacetKey(a.hit._source.type,"type")),1)])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.hit._source.compatibility,(function(e){return(0,n.wg)(),(0,n.iD)("span",{key:e,class:"badge rounded-pill bg-primary"},[fe,(0,n.Uk)(" "+(0,p.zw)(o.formatFacetKey(e,"compatibility")),1)])})),128)),a.hit._source.project_type?((0,n.wg)(),(0,n.iD)("span",pe,[he,(0,n.Uk)(" "+(0,p.zw)(o.formatFacetKey(a.hit._source.project_type,"project_type")),1)])):(0,n.kq)("",!0),a.hit._source.author?((0,n.wg)(),(0,n.iD)("span",ye,[me,(0,n.Uk)(" "+(0,p.zw)(a.hit._source.author),1)])):(0,n.kq)("",!0),a.hit._source.maintenance_status?((0,n.wg)(),(0,n.iD)("span",ve,[be,(0,n.Uk)(" "+(0,p.zw)(o.formatFacetKey(a.hit._source.maintenance_status,"maintenance_status")),1)])):(0,n.kq)("",!0),a.hit._source.development_status?((0,n.wg)(),(0,n.iD)("span",_e,[ke,(0,n.Uk)(" "+(0,p.zw)(o.formatFacetKey(a.hit._source.development_status,"development_status")),1)])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.hit._source.category,(function(e){return(0,n.wg)(),(0,n.iD)("span",{key:e,class:"badge rounded-pill bg-secondary"},[we,(0,n.Uk)(" "+(0,p.zw)(o.formatFacetKey(e,"category")),1)])})),128))]),a.hit.highlight?((0,n.wg)(),(0,n.iD)("p",Fe,(0,p.zw)(o.cleanBody(a.hit._source.body)),1)):(0,n.kq)("",!0)])])}a(6977);var je={props:{hit:{type:Object,required:!0}},computed:{formatFacetKey:function(){return function(e,t){return Z.facetMap[t].labels&&Z.facetMap[t].labels[e]?Z.facetMap[t].labels[e]:e}},formatLongNumber:function(e){var t=1,a=Math.floor(Math.log(Math.abs(e))/Math.log(1e3)),r="kmbt"[a-1];return r?(e/Math.pow(1e3,a)).toFixed(t)+r:e},cleanBody:function(){return function(e){var t=document.createElement("div");t.innerHTML=e;var a=t.textContent||t.innerText||"";return a}}}};const De=(0,u.Z)(je,[["render",qe]]);var Me=De,Se={class:"sk-cube-grid"},Te=(0,n.uE)('<div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div><div class="sk-cube sk-cube3"></div><div class="sk-cube sk-cube4"></div><div class="sk-cube sk-cube5"></div><div class="sk-cube sk-cube6"></div><div class="sk-cube sk-cube7"></div><div class="sk-cube sk-cube8"></div><div class="sk-cube sk-cube9"></div>',9),Oe=[Te];function xe(e,t,a,r,i,o){return(0,n.wg)(),(0,n.iD)("div",Se,Oe)}var Ce={};const Ie=(0,u.Z)(Ce,[["render",xe]]);var Ke=Ie,Pe={props:{hits:{type:Array,default:function(){return[]}},searchInProgress:{type:Boolean,default:!1},loadMore:{type:Function,required:!0},resetToggle:{type:Boolean,required:!0}},components:{DmsResult:Me,DmsSpinner:Ke}};const Ee=(0,u.Z)(Pe,[["render",oe]]);var ze=Ee,Ne={components:{DmsSidebar:ee,MainPageWrapper:ze},data:function(){return{sidebarExpanded:!1,hits:null,aggregations:null,page:0,resetToggle:!1,searchInProgress:!1}},methods:{loadMore:function(e){var t=this;e.loading(),this.page+=1,this.searchInProgress=!0,Z.search(this.page).then((function(a){var r;(r=t.hits).push.apply(r,(0,y.Z)(a.hits.hits)),t.aggregations=a.aggregations,a.hits.hits.length<Z.pageLength&&e.complete()})).catch((function(){e.error()})).finally((function(){t.searchInProgress=!1,e.loaded()}))},toggleSidebar:function(){this.sidebarExpanded=!this.sidebarExpanded},updateQuery:function(e){Z.query=e,this.updateRoute()},updateRoute:function(){var e={query:Z.query};void 0!==e.query&&0!==e.query.length||(e.query="-"),Object.keys(Z.facetMap).forEach((function(t){e[t]="-",Z.activeFacets[t]&&Z.activeFacets[t].length&&(e[t]=Z.activeFacets[t].join(","))})),["query"].concat((0,y.Z)(Object.keys(Z.facetMap))).reverse().some((function(t){return"-"!==e[t]||(delete e[t],!1)})),this.$router.push({name:"DrupalModuleSearch",params:e})},toggleFacet:function(e,t){Z.activeFacets[e]=Z.activeFacets[e]||[];var a=Z.activeFacets[e].indexOf(t);-1!==a?Z.activeFacets[e].splice(a,1):Z.activeFacets[e].push(t),this.updateRoute()}},watch:{"$route.params":{immediate:!0,handler:function(e){var t=this;Object.keys(Z.facetMap).forEach((function(t){e[t]&&"-"!==e[t]?Z.activeFacets[t]=e[t].split(","):Z.activeFacets[t]=null})),void 0===e.query||0===e.query.length||"-"===e.query?Z.query=void 0:Z.query=e.query,this.page=0,this.searchInProgress=!0,this.resetToggle=!this.resetToggle,Z.search(0).then((function(e){t.hits=e.hits.hits,t.aggregations=e.aggregations})).finally((function(){t.searchInProgress=!1}))}}}};const Le=(0,u.Z)(Ne,[["render",h]]);var Re=Le,Ze=["query"].concat(Object.keys(Z.facetMap)).map((function(e){return":".concat(e,"?")})).join("/"),Ue=new f.p7({history:(0,f.r5)(),routes:[{path:"/".concat(Ze),name:"DrupalModuleSearch",component:Re,props:!0}]}),Ae=(0,r.ri)({render:function(){return(0,n.h)(g)}});Ae.use(Ue),Ae.component("InfiniteLoading",o()),Ae.mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,i){if(!r){var o=1/0;for(l=0;l<e.length;l++){r=e[l][0],n=e[l][1],i=e[l][2];for(var s=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[c])}))?r.splice(c--,1):(s=!1,i<o&&(o=i));if(s){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,i,o=r[0],s=r[1],c=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(c)var l=c(a)}for(t&&t(r);u<o.length;u++)i=o[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(l)},r=self["webpackChunkdrupal_module_search"]=self["webpackChunkdrupal_module_search"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(8774)}));r=a.O(r)})();
//# sourceMappingURL=app-legacy.f4a0a8d9.js.map